<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Waigaya</title>
    <link rel="stylesheet" href="/control/control.css" />
    <style>
      .status-icon {
        font-size: 12px;
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: #f0f0f0;
      }
      .status-section {
        border-left: 3px solid #e5e7eb;
        padding-left: 12px;
      }
      .status-section.connected {
        border-left-color: #10b981;
      }
      .status-section.error {
        border-left-color: #ef4444;
      }
      .status-section.warning {
        border-left-color: #f59e0b;
      }
      .channel-item {
        display: inline-block;
        background: #f3f4f6;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        margin: 2px 4px 2px 0;
        color: #374151;
      }
      .channel-item.active {
        background: #dcfce7;
        color: #166534;
      }
    </style>
  </head>
  <body class="bg-gray-100 m-0 p-5 font-sans">
    <div class="container max-w-xl mx-auto bg-white p-5 rounded-lg shadow-lg">
      <h1 class="text-gray-800 mb-5 text-xl font-bold">Leaner Waigaya</h1>

      <div class="section mb-8" id="slackSettings">
        <div class="slack-card bg-white p-5 rounded-xl shadow-md mb-5">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-semibold text-lg">ğŸ’¬ Slacké€£æº</h3>
            <button
              class="small-btn bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700"
              onclick="showSlackConnection()"
            >
              ğŸ”Œ æ¥ç¶šè¨­å®š
            </button>
          </div>

          <!-- Slackæ¥ç¶šçŠ¶æ³ -->
          <div class="status-section mb-4">
            <div class="flex items-center mb-2">
              <div class="status-icon" id="slackConnectionIcon">ğŸ”´</div>
              <div class="ml-2">
                <div class="font-medium">æ¥ç¶šçŠ¶æ³</div>
                <div class="text-sm text-gray-600" id="slackStatus">æœªæ¥ç¶š</div>
              </div>
            </div>
          </div>

          <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—çŠ¶æ³ -->
          <div class="status-section mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center">
                <div class="status-icon" id="usersStatusIcon">âšª</div>
                <div class="ml-2">
                  <div class="font-medium">ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</div>
                  <div class="text-sm text-gray-600" id="usersStatus">
                    æœªå–å¾—
                  </div>
                </div>
              </div>
              <button
                id="reloadUsersBtn"
                class="bg-blue-600 text-white rounded px-3 py-1 text-sm hover:bg-blue-700 disabled:opacity-50"
                disabled
              >
                ãƒªãƒ­ãƒ¼ãƒ‰
              </button>
            </div>
          </div>

          <!-- ã‚«ã‚¹ã‚¿ãƒ çµµæ–‡å­—å–å¾—çŠ¶æ³ -->
          <div class="status-section mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center">
                <div class="status-icon" id="emojisStatusIcon">âšª</div>
                <div class="ml-2">
                  <div class="font-medium">ã‚«ã‚¹ã‚¿ãƒ çµµæ–‡å­—</div>
                  <div class="text-sm text-gray-600" id="emojisStatus">
                    æœªå–å¾—
                  </div>
                </div>
              </div>
              <button
                id="loadEmojisBtn"
                class="bg-purple-600 text-white rounded px-3 py-1 text-sm hover:bg-purple-700 disabled:opacity-50"
                disabled
              >
                å–å¾—
              </button>
            </div>
          </div>

          <!-- ç›£è¦–ãƒãƒ£ãƒ³ãƒãƒ«çŠ¶æ³ -->
          <div class="status-section mb-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center">
                <div class="status-icon" id="channelsStatusIcon">âšª</div>
                <div class="ml-2">
                  <div class="font-medium">ç›£è¦–ãƒãƒ£ãƒ³ãƒãƒ«</div>
                  <div class="text-sm text-gray-600" id="channelsStatus">
                    <span id="channelCount">0</span>ãƒãƒ£ãƒ³ãƒãƒ«ç›£è¦–ä¸­
                  </div>
                </div>
              </div>
              <button
                id="manageChannelsBtn"
                class="bg-green-600 text-white rounded px-3 py-1 text-sm hover:bg-green-700 disabled:opacity-50"
                onclick="showChannelManagement()"
                disabled
              >
                ğŸ“º ãƒãƒ£ãƒ³ãƒãƒ«ç®¡ç†
              </button>
            </div>
            <div id="watchedChannelList" class="mt-2 pl-6"></div>
          </div>
        </div>
      </div>

      <!-- Slackæ¥ç¶šè¨­å®šãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆéè¡¨ç¤ºï¼‰ -->
      <template id="slackConnectionDialogTemplate">
        <div class="slack-dialog-inner">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-bold">ğŸ”Œ Slackæ¥ç¶šè¨­å®š</h2>
            <button
              class="close-dialog-btn bg-gray-300 text-gray-800 rounded px-3 py-1 hover:bg-gray-400"
            >
              é–‰ã˜ã‚‹
            </button>
          </div>
          <div class="slack-config">
            <div class="mb-4">
              <label for="botToken" class="block mb-1 font-semibold"
                >Bot Token (xoxb-):</label
              >
              <input
                type="password"
                id="botToken"
                placeholder="xoxb-your-bot-token"
                class="border rounded px-3 py-2 mb-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            <div class="mb-4">
              <label for="appToken" class="block mb-1 font-semibold"
                >App Token (xapp-):</label
              >
              <input
                type="password"
                id="appToken"
                placeholder="xapp-your-app-token"
                class="border rounded px-3 py-2 mb-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            <div class="controls mb-4 flex gap-2">
              <button
                id="connectSlackBtn"
                class="bg-blue-600 text-white rounded px-4 py-2 hover:bg-blue-800"
              >
                Slackæ¥ç¶š
              </button>
              <button
                id="clearConfigBtn"
                class="bg-red-600 text-white rounded px-4 py-2 hover:bg-red-800"
              >
                è¨­å®šã‚¯ãƒªã‚¢
              </button>
            </div>
          </div>
        </div>
      </template>

      <!-- ãƒãƒ£ãƒ³ãƒãƒ«ç®¡ç†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆéè¡¨ç¤ºï¼‰ -->
      <template id="channelManagementDialogTemplate">
        <div class="slack-dialog-inner">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-bold">ğŸ“º ãƒãƒ£ãƒ³ãƒãƒ«ç®¡ç†</h2>
            <button
              class="close-dialog-btn bg-gray-300 text-gray-800 rounded px-3 py-1 hover:bg-gray-400"
            >
              é–‰ã˜ã‚‹
            </button>
          </div>
          <div class="channel-config">
            <!-- ç¾åœ¨ã®ç›£è¦–ãƒãƒ£ãƒ³ãƒãƒ« -->
            <div class="mb-4">
              <h3 class="font-semibold mb-2">ç›£è¦–ä¸­ã®ãƒãƒ£ãƒ³ãƒãƒ«</h3>
              <div
                id="currentWatchedChannels"
                class="bg-gray-50 border rounded p-3 min-h-[60px]"
              >
                <span class="text-gray-500"
                  >ç›£è¦–ä¸­ã®ãƒãƒ£ãƒ³ãƒãƒ«ã¯ã‚ã‚Šã¾ã›ã‚“</span
                >
              </div>
            </div>

            <!-- ãƒãƒ£ãƒ³ãƒãƒ«æ¤œç´¢ãƒ»è¿½åŠ  -->
            <div class="mb-4">
              <label for="channelSearch" class="block mb-1 font-semibold"
                >ãƒãƒ£ãƒ³ãƒãƒ«æ¤œç´¢:</label
              >
              <div class="flex gap-2 mb-2">
                <input
                  type="text"
                  id="channelSearch"
                  placeholder="ãƒãƒ£ãƒ³ãƒãƒ«åã§æ¤œç´¢..."
                  class="border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                  disabled
                />
                <button
                  id="loadChannelsBtn"
                  disabled
                  class="bg-blue-600 text-white rounded px-4 py-2 hover:bg-blue-800 whitespace-nowrap"
                >
                  ä¸€è¦§å–å¾—
                </button>
              </div>
            </div>
            <div class="mb-4">
              <label for="channelSelect" class="block mb-1 font-semibold"
                >ãƒãƒ£ãƒ³ãƒãƒ«é¸æŠ:</label
              >
              <select
                id="channelSelect"
                class="border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
                disabled
                size="5"
              >
                <option value="">å…ˆã«ãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§ã‚’å–å¾—ã—ã¦ãã ã•ã„</option>
              </select>
              <button
                id="addChannelBtn"
                class="bg-green-600 text-white rounded px-4 py-2 hover:bg-green-800 w-full"
                disabled
              >
                é¸æŠã—ãŸãƒãƒ£ãƒ³ãƒãƒ«ã‚’ç›£è¦–ã«è¿½åŠ 
              </button>
            </div>
          </div>
        </div>
      </template>

      <div class="section mb-8">
        <div class="controls mb-5">
          <button
            id="addSampleMsgBtn"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800 mr-2 mb-2"
          >
            ã‚µãƒ³ãƒ—ãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
          </button>
        </div>

        <div class="settings flex gap-5 items-center mb-5">
          <div class="flex flex-col">
            <label for="displayTime" class="font-bold text-sm">è¡¨ç¤ºæ™‚é–“:</label>
            <div class="flex items-center">
              <input
                type="number"
                id="displayTime"
                value="3"
                min="1"
                max="60"
                class="px-2 py-1 border border-gray-300 rounded w-20"
              />
              <span>ç§’</span>
            </div>
          </div>

          <div class="flex flex-col">
            <label for="fadeTime" class="font-bold text-sm"
              >ãƒ•ã‚§ãƒ¼ãƒ‰æ™‚é–“:</label
            >
            <div class="flex items-center">
              <input
                type="number"
                id="fadeTime"
                value="0.5"
                min="0"
                max="5"
                step="0.1"
                class="px-2 py-1 border border-gray-300 rounded w-20"
              />
              <span>ç§’</span>
            </div>
          </div>

          <div class="flex flex-col">
            <label for="fontSize" class="font-bold text-sm">æ–‡å­—ã‚µã‚¤ã‚º:</label>
            <div class="flex items-center">
              <input
                type="number"
                id="fontSize"
                value="48"
                min="10"
                max="200"
                class="px-2 py-1 border border-gray-300 rounded w-20"
              />
              <span>px</span>
            </div>
          </div>

          <div class="flex flex-col">
            <label for="bgColor" class="font-bold text-sm">èƒŒæ™¯è‰²:</label>
            <input
              type="color"
              id="bgColor"
              value="#000000"
              class="w-10 h-10 border border-gray-300 rounded"
            />
            <div class="flex items-center mt-1">
              <label for="bgAlpha" class="text-xs mr-2">é€æ˜åº¦:</label>
              <input
                type="range"
                id="bgAlpha"
                min="0"
                max="1"
                step="0.01"
                value="1"
                class="w-24"
              />
              <span id="bgAlphaValue" class="text-xs ml-2">1.00</span>
            </div>
          </div>

          <div class="flex flex-col">
            <label for="fontColor" class="font-bold text-sm">æ–‡å­—è‰²:</label>
            <input
              type="color"
              id="fontColor"
              value="#ffffff"
              class="w-10 h-10 border border-gray-300 rounded"
            />
          </div>
        </div>

        <div
          class="queue-list border border-gray-300 rounded min-h-[100px] max-h-[300px] overflow-y-scroll p-2 bg-gray-50"
          id="queueList"
        >
          ã‚­ãƒ¥ãƒ¼ã¯ç©ºã§ã™
        </div>
      </div>

      <div class="debug-info" id="debugInfo">
        <h4 class="font-bold mb-2">ğŸ” ãƒ‡ãƒãƒƒã‚°æƒ…å ±</h4>
        <div
          id="debugLog"
          class="bg-gray-100 border border-gray-300 rounded p-2 mb-2 text-xs h-32 overflow-y-auto"
        ></div>
        <button
          onclick="clearDebugLog()"
          class="bg-gray-400 text-white rounded px-3 py-1 hover:bg-gray-600 mr-2 mb-2"
        >
          ãƒ­ã‚°ã‚¯ãƒªã‚¢
        </button>
      </div>
    </div>

    <script type="module" src="/control/control.js"></script>
  </body>
</html>
